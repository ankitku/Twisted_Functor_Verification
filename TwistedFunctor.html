<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>TwistedFunctor</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library TwistedFunctor</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab1"></a><h1 class="section">Formalization of the Semidirect Product</h1>

<div class="paragraph"> </div>

 All definitions and proofs here are from the paper "How to Twist Pointers without Breaking Them" by Chauhan,Kurur,Yorgey.  
<div class="paragraph"> </div>

 In this file, we will represent mathematical structures such as monoids, functors and semidirect products using type classes. Type classes are a recent addition to Coq, and make the code highly readable. They allow generic programming for a class of types, and present functions specific for those types.
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Tactics.html#"><span class="id" title="library">Coq.Program.Tactics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Basics.html#"><span class="id" title="library">Coq.Program.Basics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#"><span class="id" title="library">Coq.Init.Datatypes</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Arith.Arith.html#"><span class="id" title="library">Coq.Arith.Arith</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#"><span class="id" title="library">Datatypes</span></a>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">program_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">core_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">type_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab2"></a><h1 class="section">Monoid</h1>
 First we define the monoid type class. It has the identity element "one" , and an append function "append". The class also contains specifications for identity and associativity laws. 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a name="Monoid"><span class="id" title="record">Monoid</span></a> (<span class="id" title="var">a</span> : <span class="id" title="keyword">Type</span>) :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="one"><span class="id" title="projection">one</span></a> : <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="append"><span class="id" title="projection">append</span></a> : <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="left_identity"><span class="id" title="projection">left_identity</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <a class="idref" href="TwistedFunctor.html#append"><span class="id" title="method">append</span></a> <a class="idref" href="TwistedFunctor.html#one"><span class="id" title="method">one</span></a> <a class="idref" href="TwistedFunctor.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="TwistedFunctor.html#x"><span class="id" title="variable">x</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="right_identity"><span class="id" title="projection">right_identity</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <a class="idref" href="TwistedFunctor.html#append"><span class="id" title="method">append</span></a> <a class="idref" href="TwistedFunctor.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="TwistedFunctor.html#one"><span class="id" title="method">one</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="TwistedFunctor.html#x"><span class="id" title="variable">x</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">associativity</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>, <a class="idref" href="TwistedFunctor.html#append"><span class="id" title="method">append</span></a> <a class="idref" href="TwistedFunctor.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="TwistedFunctor.html#append"><span class="id" title="method">append</span></a> <a class="idref" href="TwistedFunctor.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="TwistedFunctor.html#z"><span class="id" title="variable">z</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="TwistedFunctor.html#append"><span class="id" title="method">append</span></a> (<a class="idref" href="TwistedFunctor.html#append"><span class="id" title="method">append</span></a> <a class="idref" href="TwistedFunctor.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="TwistedFunctor.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="TwistedFunctor.html#z"><span class="id" title="variable">z</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">
nat is an instance of monoid. And we need to prove that ! 
</div>
<div class="code">
<span class="id" title="keyword">Instance</span> <a name="Mnat"><span class="id" title="instance">Mnat</span></a> : <a class="idref" href="TwistedFunctor.html#Monoid"><span class="id" title="class">Monoid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#plus"><span class="id" title="abbreviation">plus</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="01affea3e7db78d210e1ded4f3c18c28"><span class="id" title="notation">&quot;</span></a> m1 ♢ m2 " := (<a class="idref" href="TwistedFunctor.html#append"><span class="id" title="method">append</span></a> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
</div>

<div class="doc">
A commutative monoid is a monoid, with commutativity :) 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a name="Commutative_Monoid"><span class="id" title="record">Commutative_Monoid</span></a> <span class="id" title="var">a</span> `{<a class="idref" href="TwistedFunctor.html#Monoid"><span class="id" title="class">Monoid</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>} :=<br/>
&nbsp;&nbsp;{    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="commutativity"><span class="id" title="projection">commutativity</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <a class="idref" href="TwistedFunctor.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="TwistedFunctor.html#01affea3e7db78d210e1ded4f3c18c28"><span class="id" title="notation">♢</span></a> <a class="idref" href="TwistedFunctor.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="TwistedFunctor.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="TwistedFunctor.html#01affea3e7db78d210e1ded4f3c18c28"><span class="id" title="notation">♢</span></a> <a class="idref" href="TwistedFunctor.html#x"><span class="id" title="variable">x</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Print</span>  <a class="idref" href="TwistedFunctor.html#Commutative_Monoid"><span class="id" title="class">Commutative_Monoid</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab3"></a><h1 class="section">Functor</h1>
 Similarly, we define a functor, using a function f to map elements from one type to another. We then define fmap and its identity and homomorphism. 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a name="Functor"><span class="id" title="record">Functor</span></a> (<span class="id" title="var">f</span> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>) :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="fmap"><span class="id" title="projection">fmap</span></a> {<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="keyword">Type</span>} : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TwistedFunctor.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="ftor_identity"><span class="id" title="projection">ftor_identity</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> (<span class="id" title="var">x</span> : <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>), <a class="idref" href="TwistedFunctor.html#fmap"><span class="id" title="method">fmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="TwistedFunctor.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="TwistedFunctor.html#x"><span class="id" title="variable">x</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="ftor_homomorphism"><span class="id" title="projection">ftor_homomorphism</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> (<span class="id" title="var">p</span> : <a class="idref" href="TwistedFunctor.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#c"><span class="id" title="variable">c</span></a>) (<span class="id" title="var">q</span> : <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#b"><span class="id" title="variable">b</span></a>), <a class="idref" href="TwistedFunctor.html#fmap"><span class="id" title="method">fmap</span></a> (<a class="idref" href="TwistedFunctor.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Basics.html#23b053569700a43fa034e3971fb6ded6"><span class="id" title="notation">∘</span></a> <a class="idref" href="TwistedFunctor.html#q"><span class="id" title="variable">q</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Basics.html#23b053569700a43fa034e3971fb6ded6"><span class="id" title="notation">(</span></a><a class="idref" href="TwistedFunctor.html#fmap"><span class="id" title="method">fmap</span></a> <a class="idref" href="TwistedFunctor.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Basics.html#23b053569700a43fa034e3971fb6ded6"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Basics.html#23b053569700a43fa034e3971fb6ded6"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Basics.html#23b053569700a43fa034e3971fb6ded6"><span class="id" title="notation">(</span></a><a class="idref" href="TwistedFunctor.html#fmap"><span class="id" title="method">fmap</span></a> <a class="idref" href="TwistedFunctor.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Basics.html#23b053569700a43fa034e3971fb6ded6"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">
An applicative functor is a functor, along with pure and app_star functions. Properties of app_star, including Identity, composition and homomorphism are also defined. 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a name="Applicative_Functor"><span class="id" title="record">Applicative_Functor</span></a> <span class="id" title="var">f</span> `{<a class="idref" href="TwistedFunctor.html#Functor"><span class="id" title="class">Functor</span></a> (<a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>)} :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="pure"><span class="id" title="projection">pure</span></a> {<span class="id" title="var">a</span> : <span class="id" title="keyword">Type</span>} : <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="app_star"><span class="id" title="projection">app_star</span></a> {<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="keyword">Type</span>} : <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#b"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TwistedFunctor.html#b"><span class="id" title="variable">b</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="appftor_identity"><span class="id" title="projection">appftor_identity</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> (<span class="id" title="var">v</span> : <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>) , <a class="idref" href="TwistedFunctor.html#app_star"><span class="id" title="method">app_star</span></a> (<a class="idref" href="TwistedFunctor.html#pure"><span class="id" title="method">pure</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>) <a class="idref" href="TwistedFunctor.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="TwistedFunctor.html#v"><span class="id" title="variable">v</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="appftor_composition"><span class="id" title="projection">appftor_composition</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> (<span class="id" title="var">u</span> : <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="TwistedFunctor.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#c"><span class="id" title="variable">c</span></a>)) (<span class="id" title="var">v</span> : <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#b"><span class="id" title="variable">b</span></a>)) (<span class="id" title="var">w</span> : <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>), <a class="idref" href="TwistedFunctor.html#app_star"><span class="id" title="method">app_star</span></a> (<a class="idref" href="TwistedFunctor.html#app_star"><span class="id" title="method">app_star</span></a> (<a class="idref" href="TwistedFunctor.html#app_star"><span class="id" title="method">app_star</span></a> (<a class="idref" href="TwistedFunctor.html#pure"><span class="id" title="method">pure</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Basics.html#compose"><span class="id" title="definition">compose</span></a>) <a class="idref" href="TwistedFunctor.html#u"><span class="id" title="variable">u</span></a>) <a class="idref" href="TwistedFunctor.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="TwistedFunctor.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="TwistedFunctor.html#app_star"><span class="id" title="method">app_star</span></a> <a class="idref" href="TwistedFunctor.html#u"><span class="id" title="variable">u</span></a> (<a class="idref" href="TwistedFunctor.html#app_star"><span class="id" title="method">app_star</span></a> <a class="idref" href="TwistedFunctor.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="TwistedFunctor.html#w"><span class="id" title="variable">w</span></a>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="appftor_homomorphism"><span class="id" title="projection">appftor_homomorphism</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> (<span class="id" title="var">f</span> : <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#b"><span class="id" title="variable">b</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>), <a class="idref" href="TwistedFunctor.html#app_star"><span class="id" title="method">app_star</span></a> (<a class="idref" href="TwistedFunctor.html#pure"><span class="id" title="method">pure</span></a> <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a>) (<a class="idref" href="TwistedFunctor.html#pure"><span class="id" title="method">pure</span></a> <a class="idref" href="TwistedFunctor.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="TwistedFunctor.html#pure"><span class="id" title="method">pure</span></a> (<a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TwistedFunctor.html#x"><span class="id" title="variable">x</span></a>)<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="21eebdda6a1bd64885e2dcac5205d0fd"><span class="id" title="notation">&quot;</span></a> fab &lt;*&gt; fa " := (<a class="idref" href="TwistedFunctor.html#app_star"><span class="id" title="method">app_star</span></a> <span class="id" title="var">fab</span> <span class="id" title="var">fa</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
</div>

<div class="doc">
Monoidal Functor is intuitively a type indexed monoid, in which the identity element is f applied on unit, and append takes 2 (different) types a and b, both of which are mapped to the same category by f, and then applied using mf_star  
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a name="Monoidal_Functor"><span class="id" title="record">Monoidal_Functor</span></a> <span class="id" title="var">f</span> `{<a class="idref" href="TwistedFunctor.html#Functor"><span class="id" title="class">Functor</span></a> (<a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>)} :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="mf_unit"><span class="id" title="projection">mf_unit</span></a> : <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="mf_star"><span class="id" title="projection">mf_star</span></a> {<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="keyword">Type</span>} : <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TwistedFunctor.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a> <a class="idref" href="TwistedFunctor.html#b"><span class="id" title="variable">b</span></a>);<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="mf_left_identity"><span class="id" title="projection">mf_left_identity</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> {<span class="id" title="var">v</span> : <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>}, <a class="idref" href="TwistedFunctor.html#fmap"><span class="id" title="method">fmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="TwistedFunctor.html#mf_star"><span class="id" title="method">mf_star</span></a> <a class="idref" href="TwistedFunctor.html#mf_unit"><span class="id" title="method">mf_unit</span></a> <a class="idref" href="TwistedFunctor.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="TwistedFunctor.html#v"><span class="id" title="variable">v</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="mf_right_identity"><span class="id" title="projection">mf_right_identity</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> {<span class="id" title="var">v</span> : <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>}, <a class="idref" href="TwistedFunctor.html#fmap"><span class="id" title="method">fmap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="TwistedFunctor.html#mf_star"><span class="id" title="method">mf_star</span></a> <a class="idref" href="TwistedFunctor.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="TwistedFunctor.html#mf_unit"><span class="id" title="method">mf_unit</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="TwistedFunctor.html#v"><span class="id" title="variable">v</span></a>;<br/>
<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="e10779b5553aaaaa71e521c86b0d6e90"><span class="id" title="notation">&quot;</span></a> u ✶ v " := (<a class="idref" href="TwistedFunctor.html#mf_star"><span class="id" title="method">mf_star</span></a> <span class="id" title="var">u</span> <span class="id" title="var">v</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab4"></a><h1 class="section">Action</h1>
 given a monoid m and a type a, a left action of m on a is a function by which elements of m can act as transformations on elements of type a. As monoids accumulate result, the actions also accumulate as is evident from the definition of act_comp. 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a name="Action"><span class="id" title="record">Action</span></a> <span class="id" title="var">m</span> <span class="id" title="var">a</span> `{<a class="idref" href="TwistedFunctor.html#Monoid"><span class="id" title="class">Monoid</span></a> <a class="idref" href="TwistedFunctor.html#m"><span class="id" title="variable">m</span></a>}  :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="act"><span class="id" title="projection">act</span></a> : <a class="idref" href="TwistedFunctor.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="act_id"><span class="id" title="projection">act_id</span></a> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">e</span> : <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>}, <a class="idref" href="TwistedFunctor.html#act"><span class="id" title="method">act</span></a> <a class="idref" href="TwistedFunctor.html#one"><span class="id" title="method">one</span></a> <a class="idref" href="TwistedFunctor.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="TwistedFunctor.html#e"><span class="id" title="variable">e</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="act_comp"><span class="id" title="projection">act_comp</span></a> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">m1</span> <span class="id" title="var">m2</span> : <a class="idref" href="TwistedFunctor.html#m"><span class="id" title="variable">m</span></a>} {<span class="id" title="var">e</span> : <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>}, <a class="idref" href="TwistedFunctor.html#act"><span class="id" title="method">act</span></a> (<a class="idref" href="TwistedFunctor.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="TwistedFunctor.html#01affea3e7db78d210e1ded4f3c18c28"><span class="id" title="notation">♢</span></a> <a class="idref" href="TwistedFunctor.html#m2"><span class="id" title="variable">m2</span></a>) <a class="idref" href="TwistedFunctor.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="TwistedFunctor.html#act"><span class="id" title="method">act</span></a> <a class="idref" href="TwistedFunctor.html#m1"><span class="id" title="variable">m1</span></a> (<a class="idref" href="TwistedFunctor.html#act"><span class="id" title="method">act</span></a> <a class="idref" href="TwistedFunctor.html#m2"><span class="id" title="variable">m2</span></a> <a class="idref" href="TwistedFunctor.html#e"><span class="id" title="variable">e</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="01e76694699a3667b35d72d15d0d8c1a"><span class="id" title="notation">&quot;</span></a>m • a" := (<a class="idref" href="TwistedFunctor.html#act"><span class="id" title="method">act</span></a> <span class="id" title="var">m</span> <span class="id" title="var">a</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 60, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
</div>

<div class="doc">
Action of m on a can distribute, when a is itself a monoid composed of a1 and a2 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a name="Distr_Action"><span class="id" title="record">Distr_Action</span></a> <span class="id" title="var">m</span> <span class="id" title="var">a</span> `{<a class="idref" href="TwistedFunctor.html#Action"><span class="id" title="class">Action</span></a> <a class="idref" href="TwistedFunctor.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>} `{<a class="idref" href="TwistedFunctor.html#Monoid"><span class="id" title="class">Monoid</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>}:=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="d_act_annih"><span class="id" title="projection">d_act_annih</span></a> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">m1</span> : <a class="idref" href="TwistedFunctor.html#m"><span class="id" title="variable">m</span></a>}, <a class="idref" href="TwistedFunctor.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="TwistedFunctor.html#01e76694699a3667b35d72d15d0d8c1a"><span class="id" title="notation">•</span></a> <a class="idref" href="TwistedFunctor.html#one"><span class="id" title="method">one</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="TwistedFunctor.html#one"><span class="id" title="method">one</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="d_act_dist"><span class="id" title="projection">d_act_dist</span></a> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">m1</span> : <a class="idref" href="TwistedFunctor.html#m"><span class="id" title="variable">m</span></a>} {<span class="id" title="var">a1</span> <span class="id" title="var">a2</span> : <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>},  <a class="idref" href="TwistedFunctor.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="TwistedFunctor.html#01e76694699a3667b35d72d15d0d8c1a"><span class="id" title="notation">•</span></a> <a class="idref" href="TwistedFunctor.html#01e76694699a3667b35d72d15d0d8c1a"><span class="id" title="notation">(</span></a><a class="idref" href="TwistedFunctor.html#a1"><span class="id" title="variable">a1</span></a> <a class="idref" href="TwistedFunctor.html#01affea3e7db78d210e1ded4f3c18c28"><span class="id" title="notation">♢</span></a> <a class="idref" href="TwistedFunctor.html#a2"><span class="id" title="variable">a2</span></a><a class="idref" href="TwistedFunctor.html#01e76694699a3667b35d72d15d0d8c1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="TwistedFunctor.html#01affea3e7db78d210e1ded4f3c18c28"><span class="id" title="notation">(</span></a><a class="idref" href="TwistedFunctor.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="TwistedFunctor.html#01e76694699a3667b35d72d15d0d8c1a"><span class="id" title="notation">•</span></a> <a class="idref" href="TwistedFunctor.html#a1"><span class="id" title="variable">a1</span></a><a class="idref" href="TwistedFunctor.html#01affea3e7db78d210e1ded4f3c18c28"><span class="id" title="notation">)</span></a> <a class="idref" href="TwistedFunctor.html#01affea3e7db78d210e1ded4f3c18c28"><span class="id" title="notation">♢</span></a> <a class="idref" href="TwistedFunctor.html#01affea3e7db78d210e1ded4f3c18c28"><span class="id" title="notation">(</span></a><a class="idref" href="TwistedFunctor.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="TwistedFunctor.html#01e76694699a3667b35d72d15d0d8c1a"><span class="id" title="notation">•</span></a> <a class="idref" href="TwistedFunctor.html#a2"><span class="id" title="variable">a2</span></a><a class="idref" href="TwistedFunctor.html#01affea3e7db78d210e1ded4f3c18c28"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">
<a name="lab5"></a><h1 class="section">Semidirect Product</h1>

<div class="paragraph"> </div>

 Semidirect Product is just the product type (a,m) under the monoid operation, where m is a monoid acting distributively on the monoid a
<div class="paragraph"> </div>

 Here we define sdp a b which is the product (a,b) 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a name="sdp"><span class="id" title="inductive">sdp</span></a> (<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="keyword">Type</span>) : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a name="SDP"><span class="id" title="constructor">SDP</span></a> : <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#sdp"><span class="id" title="inductive">sdp</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="39ac3ab61147b418297befc1b0b199f5"><span class="id" title="notation">&quot;</span></a>a ⋊ b" := <a class="idref" href="TwistedFunctor.html#sdp"><span class="id" title="inductive">sdp</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> <a name="881b5bc85a39ee0ee7e66a4fd9333f2b"><span class="id" title="notation">&quot;</span></a>a ':⋊' b" := <a class="idref" href="TwistedFunctor.html#SDP"><span class="id" title="constructor">SDP</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
<span class="id" title="keyword">Check</span> <a class="idref" href="TwistedFunctor.html#SDP"><span class="id" title="constructor">SDP</span></a>.<br/>
<span class="id" title="keyword">Check</span> <a class="idref" href="TwistedFunctor.html#sdp"><span class="id" title="inductive">sdp</span></a>.<br/>

<br/>
</div>

<div class="doc">
Now we define the identity and append operations of Semidirect Product
</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a name="SDP"><span class="id" title="section">SDP</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> (<a name="SDP.a"><span class="id" title="variable">a</span></a> <a name="SDP.m"><span class="id" title="variable">m</span></a> : <span class="id" title="keyword">Type</span>) (<a name="SDP.A"><span class="id" title="variable">A</span></a> : <a class="idref" href="TwistedFunctor.html#Monoid"><span class="id" title="class">Monoid</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>) (<a name="SDP.M"><span class="id" title="variable">M</span></a> : <a class="idref" href="TwistedFunctor.html#Monoid"><span class="id" title="class">Monoid</span></a> <a class="idref" href="TwistedFunctor.html#m"><span class="id" title="variable">m</span></a>) (<a name="SDP.AMA"><span class="id" title="variable">AMA</span></a> : <a class="idref" href="TwistedFunctor.html#Action"><span class="id" title="class">Action</span></a> <a class="idref" href="TwistedFunctor.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>) (<a name="SDP.DAMA"><span class="id" title="variable">DAMA</span></a> : <a class="idref" href="TwistedFunctor.html#Distr_Action"><span class="id" title="class">Distr_Action</span></a> <a class="idref" href="TwistedFunctor.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>) (<a name="SDP.a1"><span class="id" title="variable">a1</span></a> <a name="SDP.a2"><span class="id" title="variable">a2</span></a> : <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>) (<a name="SDP.m1"><span class="id" title="variable">m1</span></a> <a name="SDP.m2"><span class="id" title="variable">m2</span></a> : <a class="idref" href="TwistedFunctor.html#m"><span class="id" title="variable">m</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="sdp_one"><span class="id" title="definition">sdp_one</span></a> := <a class="idref" href="TwistedFunctor.html#SDP"><span class="id" title="constructor">SDP</span></a> <a class="idref" href="TwistedFunctor.html#SDP.a"><span class="id" title="variable">a</span></a> <a class="idref" href="TwistedFunctor.html#SDP.m"><span class="id" title="variable">m</span></a> <a class="idref" href="TwistedFunctor.html#one"><span class="id" title="method">one</span></a> <a class="idref" href="TwistedFunctor.html#one"><span class="id" title="method">one</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="sdp_app"><span class="id" title="definition">sdp_app</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="TwistedFunctor.html#X"><span class="id" title="variable">X</span></a>, <a class="idref" href="TwistedFunctor.html#Y"><span class="id" title="variable">Y</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|(<a class="idref" href="TwistedFunctor.html#SDP"><span class="id" title="constructor">SDP</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">a1</span> <span class="id" title="var">m1</span>),(<a class="idref" href="TwistedFunctor.html#SDP"><span class="id" title="constructor">SDP</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">a2</span> <span class="id" title="var">m2</span>) =&gt; (<a class="idref" href="TwistedFunctor.html#SDP"><span class="id" title="constructor">SDP</span></a> <a class="idref" href="TwistedFunctor.html#SDP.a"><span class="id" title="variable">a</span></a> <a class="idref" href="TwistedFunctor.html#SDP.m"><span class="id" title="variable">m</span></a> (<span class="id" title="var">a1</span> <a class="idref" href="TwistedFunctor.html#01affea3e7db78d210e1ded4f3c18c28"><span class="id" title="notation">♢</span></a> <a class="idref" href="TwistedFunctor.html#01affea3e7db78d210e1ded4f3c18c28"><span class="id" title="notation">(</span></a><span class="id" title="var">m1</span> <a class="idref" href="TwistedFunctor.html#01e76694699a3667b35d72d15d0d8c1a"><span class="id" title="notation">•</span></a> <span class="id" title="var">a2</span><a class="idref" href="TwistedFunctor.html#01affea3e7db78d210e1ded4f3c18c28"><span class="id" title="notation">)</span></a>) (<span class="id" title="var">m1</span> <a class="idref" href="TwistedFunctor.html#01affea3e7db78d210e1ded4f3c18c28"><span class="id" title="notation">♢</span></a> <span class="id" title="var">m2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">crush</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span> : ?<span class="id" title="var">T</span> |- ?<span class="id" title="var">T</span> ] =&gt; <span class="id" title="tactic">exact</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- ?<span class="id" title="var">T</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">T</span> ] =&gt; <span class="id" title="tactic">reflexivity</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="TwistedFunctor.html#sdp"><span class="id" title="inductive">sdp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[<a class="idref" href="TwistedFunctor.html#sdp_one"><span class="id" title="definition">sdp_one</span></a>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="TwistedFunctor.html#sdp_one"><span class="id" title="definition">sdp_one</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[<a class="idref" href="TwistedFunctor.html#sdp_app"><span class="id" title="definition">sdp_app</span></a>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="TwistedFunctor.html#sdp_app"><span class="id" title="definition">sdp_app</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[<span class="id" title="var">_</span><a class="idref" href="TwistedFunctor.html#01e76694699a3667b35d72d15d0d8c1a"><span class="id" title="notation">•</span></a><span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="TwistedFunctor.html#act_id"><span class="id" title="method">act_id</span></a>); <span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="TwistedFunctor.html#act_comp"><span class="id" title="method">act_comp</span></a>); <span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="TwistedFunctor.html#d_act_annih"><span class="id" title="method">d_act_annih</span></a>); <span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="TwistedFunctor.html#d_act_dist"><span class="id" title="method">d_act_dist</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[<span class="id" title="var">_</span><a class="idref" href="TwistedFunctor.html#01affea3e7db78d210e1ded4f3c18c28"><span class="id" title="notation">♢</span></a><span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="TwistedFunctor.html#left_identity"><span class="id" title="method">left_identity</span></a>); <span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="TwistedFunctor.html#right_identity"><span class="id" title="method">right_identity</span></a>); <span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> <span class="id" title="keyword">associativity</span>)          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
We need to prove that Semidirect Product of a and m is indeed a monoid. 
</div>
<div class="code">
<span class="id" title="keyword">Instance</span> <a name="Semidirect_Product"><span class="id" title="instance">Semidirect_Product</span></a> : <a class="idref" href="TwistedFunctor.html#Monoid"><span class="id" title="class">Monoid</span></a> (<a class="idref" href="TwistedFunctor.html#sdp"><span class="id" title="inductive">sdp</span></a> <a class="idref" href="TwistedFunctor.html#SDP.a"><span class="id" title="variable">a</span></a> <a class="idref" href="TwistedFunctor.html#SDP.m"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> <a class="idref" href="TwistedFunctor.html#sdp_one"><span class="id" title="definition">sdp_one</span></a> <a class="idref" href="TwistedFunctor.html#sdp_app"><span class="id" title="definition">sdp_app</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="keyword">associativity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="keyword">associativity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="TwistedFunctor.html#SDP"><span class="id" title="section">SDP</span></a>.<br/>

<br/>
</div>

<div class="doc">
Monoids can also act on functors as shown 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a name="ActionF"><span class="id" title="record">ActionF</span></a> (<span class="id" title="var">m</span> <span class="id" title="var">a</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span>:<span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>) `{<a class="idref" href="TwistedFunctor.html#Monoid"><span class="id" title="class">Monoid</span></a> <a class="idref" href="TwistedFunctor.html#m"><span class="id" title="variable">m</span></a>} `{<a class="idref" href="TwistedFunctor.html#Monoid"><span class="id" title="class">Monoid</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>} `{<a class="idref" href="TwistedFunctor.html#Functor"><span class="id" title="class">Functor</span></a> <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a>} :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="actf"><span class="id" title="projection">actf</span></a> : <a class="idref" href="TwistedFunctor.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="actf_id"><span class="id" title="projection">actf_id</span></a> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">e</span> : <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>}, <a class="idref" href="TwistedFunctor.html#actf"><span class="id" title="method">actf</span></a> <a class="idref" href="TwistedFunctor.html#one"><span class="id" title="method">one</span></a> <a class="idref" href="TwistedFunctor.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="TwistedFunctor.html#e"><span class="id" title="variable">e</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="actf_comp"><span class="id" title="projection">actf_comp</span></a> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">m1</span> <span class="id" title="var">m2</span> : <a class="idref" href="TwistedFunctor.html#m"><span class="id" title="variable">m</span></a>} {<span class="id" title="var">e</span> : <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>}, <a class="idref" href="TwistedFunctor.html#actf"><span class="id" title="method">actf</span></a> (<a class="idref" href="TwistedFunctor.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="TwistedFunctor.html#01affea3e7db78d210e1ded4f3c18c28"><span class="id" title="notation">♢</span></a> <a class="idref" href="TwistedFunctor.html#m2"><span class="id" title="variable">m2</span></a>) <a class="idref" href="TwistedFunctor.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="TwistedFunctor.html#actf"><span class="id" title="method">actf</span></a> <a class="idref" href="TwistedFunctor.html#m1"><span class="id" title="variable">m1</span></a> (<a class="idref" href="TwistedFunctor.html#actf"><span class="id" title="method">actf</span></a> <a class="idref" href="TwistedFunctor.html#m2"><span class="id" title="variable">m2</span></a> <a class="idref" href="TwistedFunctor.html#e"><span class="id" title="variable">e</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="uniformity"><span class="id" title="projection">uniformity</span></a> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">g</span> : <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>} {<span class="id" title="var">u</span> : <a class="idref" href="TwistedFunctor.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TwistedFunctor.html#a"><span class="id" title="variable">a</span></a>} {<span class="id" title="var">m1</span> : <a class="idref" href="TwistedFunctor.html#m"><span class="id" title="variable">m</span></a>}, <a class="idref" href="TwistedFunctor.html#actf"><span class="id" title="method">actf</span></a> <a class="idref" href="TwistedFunctor.html#m1"><span class="id" title="variable">m1</span></a> (<a class="idref" href="TwistedFunctor.html#fmap"><span class="id" title="method">fmap</span></a> <a class="idref" href="TwistedFunctor.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="TwistedFunctor.html#u"><span class="id" title="variable">u</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="TwistedFunctor.html#fmap"><span class="id" title="method">fmap</span></a> <a class="idref" href="TwistedFunctor.html#g"><span class="id" title="variable">g</span></a> (<a class="idref" href="TwistedFunctor.html#actf"><span class="id" title="method">actf</span></a> <a class="idref" href="TwistedFunctor.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="TwistedFunctor.html#u"><span class="id" title="variable">u</span></a>)<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="07511cc7b4449ee9480d9ba5e0461640"><span class="id" title="notation">&quot;</span></a> m ⊙ fa " := (<a class="idref" href="TwistedFunctor.html#actf"><span class="id" title="method">actf</span></a> <span class="id" title="var">m</span> <span class="id" title="var">fa</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>